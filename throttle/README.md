# 节流

节流（throttle）是 JavaScript 中函数执行的一种优化方案。在实际的项目开发中，我们可能经常要监听 resize、scroll 等一下执行非常频繁的事件。

比如 resize 事件，当我们拖动浏览器的边框不断的改变浏览器窗口大小的时候，其监听函数就会不断的被调用，而如果监听函数执行的逻辑比较复杂，那么其中的执行时间就会比较长，最终导致页面卡顿。

为了改善用户的体验，经过分析，我们可以将这种频繁的函数调用的操作进行适当的优化：比如在一定的时间间隔后调用一次，消除这段时间间隔中无用的函数调用。这就像吃饭一样，你需要隔一段时间将米饭往嘴里送，在时间段内进行咀嚼和下咽的工作，而不是一直不停的将米饭往嘴里送，这样你的嘴巴会撑得满满的。

## 实现

### 时间戳

时间戳形式的实现原理是：节流函数会接受处理函数 handleFunc 和 节流时间 threshhold 作为输入的参数。当执行节流函数时，我们会记录当前的时间。当每次调用节流函数返回的函数时，再获取当前执行的时间点，与节流函数中记录的时间进行比较，得到一个时间差，和节流时间 threshhold 作比较，如果是前者大于等于后者就调用一次处理函数 handleFunc，然后将当前时间赋值给节流函数的时间变量，更新计时的起点时间，否则就等下一次调用时继续比较。

### 定时器

定时器形式的实现原理是：定时器，定时器，必须要有一个变量来保存定时器的 id，以便我们对定时器进行是否存在的判断和清除定时器的操作。首先，我们会对保存定时器的变量进行判断，如果有值，则说明定时器已经存在了，说明已经处于等待调用的过程中了，那我们需要等到下次调用时再进行查看。 如果是没有值，就说明定时器不存在，就可以执行函数了，于是就定义一个定时器来向任务队列注册目标函数。当目标函数执行后一定要记住要将保存定时器 id 的变量设置为空。
